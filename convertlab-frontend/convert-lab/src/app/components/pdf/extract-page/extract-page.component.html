<div class="container">
  <div class="extract-container">

    @if (thumbnailUrl()) {
    <!-- Show thumbnail when file is uploaded -->
    <div class="thumbnail-section">
      <app-thumbnail [id]="uploadedFileId() || 'temp'" [thumbnailUrl]="thumbnailUrl()" [pageCount]="pageCount()"
        [fileName]="fileName()" [uploadStatus]="isUploading() ? 'uploading' : 'completed'" (remove)="removeThumbnail()">
      </app-thumbnail>
    </div>
    }

    @if (!thumbnailUrl()) {
    <!-- Show file uploader when no file is uploaded -->
    <div class="file-uploader-wrapper">
      <app-file-uploader [allowedTypes]="['pdf']" (onFileSelected)="onFileUploaded($event)"
        (fileRemoved)="onFileRemoved()" [isUploading]="isUploading()">
      </app-file-uploader>
    </div>
    }

    <!-- Extract options -->
    <div class="extract-options">
      <div class="option-item">
        <app-page-range-input class="page-range-input" [(ngModel)]="pageRange">
        </app-page-range-input>
      </div>

      <div class="option-item">
        <mat-button-toggle-group name="fontStyle" aria-label="Font Style" [value]="actionType()"
          (change)="actionTypeChange($event)">
          <mat-button-toggle value="KEEP">Keep Pages</mat-button-toggle>
          <mat-button-toggle value="REMOVE">Remove Pages</mat-button-toggle>
        </mat-button-toggle-group>
      </div>

    </div>
    <app-action-button [disabled]="!canExtract()" [loading]="isExtracting() || isWaitingForUpload()"
      [label]="extractButtonLabel()" variant="filled" [inputClass]="'big-button-64 w-100'" (onClick)="extract()">
    </app-action-button>
  </div>
</div>