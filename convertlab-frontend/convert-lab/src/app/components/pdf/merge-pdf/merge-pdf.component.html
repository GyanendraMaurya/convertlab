<div class="container">

  @if (thumbnails().length > 1) {
  <div class="merge-button-container">

    <div class="merge-button">
      <app-action-button [loading]="isMerging()" [label]=" isMerging() ? 'Merging...' : 'Merge'" variant="filled"
        [inputClass]="'big-button-64 w-100'" (onClick)="merge()">
      </app-action-button>
    </div>
  </div>
  }

  @if(thumbnails().length > 0){
  <div class="thumbnail-list" cdkDropList cdkDropListOrientation="mixed" (cdkDropListDropped)="onDrop($event)">
    @for (pdf of thumbnails(); track pdf.fileId; let i = $index) {

    <div class="thumbnail-wrapper" cdkDrag>
      <app-thumbnail [id]="pdf.fileId" [thumbnailUrl]="pdf.thumbnailUrl" [pageCount]="pdf.pageCount"
        [fileName]="pdf.fileName" (remove)="removePdf($event)">
      </app-thumbnail>

      <!-- Order indicator -->
      <div class="order-badge">{{ i + 1 }}</div>

      <!-- Drag handle (important for mobile UX) -->
      <div class="drag-hint">
        <mat-icon>drag_indicator</mat-icon>
      </div>

    </div>
    }
  </div>
  }

  <div class="file-uploader-container">
    <div class="file-uploader-content">
      <app-file-uploader [allowedTypes]="['pdf']" [isUploading]="isUploading()"
        (onFileSelected)="onFileUploaded($event)">
      </app-file-uploader>
    </div>
  </div>
</div>